<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Chi tiết giao dịch</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        function deleteGiaoDich(id) {
            if (confirm("Bạn có chắc chắn muốn xóa giao dịch này không?")) {
                fetch('/giaodich/delete/' + id, { method: 'DELETE' })
                    .then(response => {

                        alert("Xóa giao dịch thành công!");
                        window.location.href = "/giaodich/list";

                    })
                    .catch(error => console.error("Lỗi:", error));
            }
        }
    </script>
</head>
<body>
<div class="container mt-4">
    <h2>Chi tiết giao dịch</h2>
    <table class="table">
        <tr>
            <th>Mã giao dịch</th>
            <td th:text="${giaoDich.maGiaoDich}"></td>
        </tr>
        <tr>
            <th>Loại bất động sản</th>
            <td th:text="${giaoDich.loaiDichVu.tenLoaiDichVu}"></td>
        </tr>
        <tr>
            <th>Ngày giao dịch</th>
            <td th:text="${#dates.format(giaoDich.ngayGiaoDich, 'dd/MM/yyyy')}"></td>
        </tr>
        <tr>
            <th>Đơn giá (VND)</th>
            <td th:text="${#numbers.formatDecimal(giaoDich.donGia, 0, 'COMMA', 2, 'POINT')}"></td>
        </tr>
        <tr>
            <th>Diện tích (m2)</th>
            <td th:text="${giaoDich.dienTich}"></td>
        </tr>
        <tr>
            <th>Tên khách hàng</th>
            <td th:text="${giaoDich.khachHang.tenKhachHang}"></td>
        </tr>
        <tr>
            <th>Số điện thoại</th>
            <td th:text="${giaoDich.khachHang.soDienThoai}"></td>
        </tr>
        <tr>
            <th>Email</th>
            <td th:text="${giaoDich.khachHang.email}"></td>
        </tr>
    </table>

    <a th:href="@{/giaodich/list}" class="btn btn-primary">Quay lại</a>

    <button class="btn btn-danger" th:onclick="deleteGiaoDich([[${giaoDich.maGiaoDich}]])">Xóa</button>
</div>
</body>
</html>
